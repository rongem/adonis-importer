<div class="parent">
@if (classesReady | async) {
    @if (formSubmitted) {
        <div>
            <div>
                <label for="xmlContent">XML-Konfiguration:</label>
            </div>
            <div>
                <textarea id="xmlContent" #xmlContent [textContent]="xmlText" class="xml-result" readonly></textarea>
            </div>
            <div>
                <button type="button" (click)="copyToClipboard(xmlContent.textContent!)">XML in die Zwischenablage kopieren</button>
            </div>
        </div>
    } @else {
        <div class="content buttonlist">
            @for (ci of (classes | async); track ci.class.id) {
                <p>
                    <button [title]="ci.class.infoText ? ci.class.infoText.de : ''" (click)="selectButton_click(ci)" [ngClass]="{selected: ci.class.id === selectedClass?.class?.id}">
                        {{ci.class.displayNames.de}} ({{ ci.class.metaName }}):
                    </button>
                    <!--img [src]="imageUrl(cl.class.rest_links)"-->
                </p>
            }
        </div>
        @if (selectedClass) {
            <div>
                <h2>{{selectedClass.class.displayNames.de}} ({{selectedClass.class.metaName}}: {{selectedClass.class.id}})</h2>
                <form [formGroup]="attributeForm!" class="content attributelist">
                    @for (chapter of selectedClass.notebook.chapters; track chapter.id) {
                        <ul class="chapter">
                            <li>
                                <h3>{{chapter.displayNames.de}}</h3>
                                <app-children [children]="chapter.children" [formGroup]="attributeForm!"></app-children>
                            </li>
                        </ul>
                    }
                </form>
                <div class="form-control">
                    <button type="submit" (click)="submitForm()">Auswählen</button> <button type="reset" (click)="resetForm()">Auswahl löschen</button>
                </div>
            </div>
        }
    }
} @else {
    @if ((working | async) === false) {
        <app-login></app-login>
    }
}
</div>
